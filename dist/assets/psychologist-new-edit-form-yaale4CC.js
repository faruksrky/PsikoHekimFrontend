import{D as P,u as T,r as n,b as F,e as A,j as e,ac as B,ad as E,a8 as G,B as b,T as o,ae as L,F as g,o as z}from"./index-C93MCRui.js";import"./tr-Dnx_KkQs.js";import{z as l,i as H,u as K,t as O,a as V,F as i,j as I,k as R,C as q,L as W}from"./form-provider-C9iOJ1LY.js";import{s as j,G as x,S as Y,M as _}from"./Snackbar-CsnZb_x7.js";import{C as y}from"./Card-Ce3bea7q.js";P.locale("tr");const J=l.object({firstName:l.string().min(1,{message:"Ad bilgisi gereklidir!"}),lastName:l.string().min(1,{message:"Soyad bilgisi gereklidir!"}),email:l.string().min(1,{message:"Email bilgisi gereklidir!"}).email({message:"Geçerli bir mail adresi girilmelidir!"}),phoneNumber:j.phoneNumber({isValidPhoneNumber:H}),country:j.objectOrNull({message:{required_error:"Ülke bilgisi gereklidir!"}}),sessionStartDate:l.date().refine(a=>a instanceof Date,{message:"Geçerli bir tarih seçilmelidir!"}),paymentMethod:l.string().min(1,{message:"Ödeme yöntemi bilgisi gereklidir!"})});function ee({currentUser:a}){T();const[u,m]=n.useState(!1),[f,d]=n.useState(""),[S,c]=n.useState("success"),k=n.useMemo(()=>({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",country:(a==null?void 0:a.country)||"",sessionStartDate:(a==null?void 0:a.sessionStartDate)||null,paymentMethod:(a==null?void 0:a.paymentMethod)||""}),[a]),h=K({mode:"onSubmit",resolver:O(J),defaultValues:k});F();const{reset:v,watch:N,control:w,handleSubmit:C,formState:{isSubmitting:D}}=h,r=N(),p=(s,t)=>{t!=="clickaway"&&m(!1)},M=C(async s=>{try{await A({userName:s.email,email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,country:s.country,sessionStartDate:s.sessionStartDate,paymentMethod:s.paymentMethod}),d("Kullanıcı başarıyla kaydedildi."),c("success"),m(!0),v()}catch(t){console.log("error",t),t.response&&t.response.status===409?d("Bu e-posta adresi veya kullanıcı adı zaten kullanımda."):d("Kullanıcı kaydedilemedi, lütfen tekrar deneyin."),c("error"),m(!0)}});return e.jsxs(B,{dateAdapter:E,adapterLocale:"tr",children:[e.jsx(V,{methods:h,onSubmit:M,children:e.jsxs(x,{container:!0,spacing:3,children:[e.jsx(x,{xs:12,md:4,children:e.jsxs(y,{sx:{pt:10,pb:5,px:3},children:[a&&e.jsx(G,{color:r.status==="active"&&"success"||r.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:r.status}),e.jsx(b,{sx:{mb:5},children:e.jsx(i.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:e.jsxs(o,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["izin verilen formatlar *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max yüklenecek kapasite ",I(3145728)]})})}),a&&e.jsx(R,{labelPlacement:"start",control:e.jsx(q,{name:"status",control:w,render:({field:s})=>e.jsx(L,{...s,checked:s.value!=="active",onChange:t=>s.onChange(t.target.checked?"banned":"active")})}),label:e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),e.jsx(i.Switch,{name:"isVerified",labelPlacement:"start",label:e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"subtitle2",sx:{mb:.5},children:"Email verified"}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}}),a&&e.jsx(g,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:e.jsx(z,{variant:"soft",color:"error",children:"Delete user"})})]})}),e.jsx(x,{xs:12,md:8,children:e.jsxs(y,{sx:{p:3},children:[e.jsxs(b,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[e.jsx(i.Text,{name:"firstName",label:"Ad"}),e.jsx(i.Text,{name:"lastName",label:"Soyad"}),e.jsx(i.Text,{name:"email",label:"E-Posta"}),e.jsx(i.Phone,{name:"phoneNumber",label:"Telefon"}),e.jsx(i.CountrySelect,{fullWidth:!0,name:"country",label:"Ülke",placeholder:"Ülke Seç ..."}),e.jsx(i.DatePicker,{name:"sessionStartDate",label:"Seans Başlangıç Tarihi"}),e.jsx(i.Text,{name:"paymentMethod",label:"Ödeme Yöntemi"})]}),e.jsx(g,{alignItems:"flex-end",sx:{mt:1},children:e.jsx(W,{type:"submit",variant:"contained",loading:D,children:a?"Değişiklikleri Kaydet":"Hasta Oluştur"})})]})})]})}),e.jsx(Y,{open:u,autoHideDuration:6e3,onClose:p,children:e.jsx(_,{onClose:p,severity:S,sx:{width:"100%"},children:f})})]})}export{ee as P};
