import{b as T,j as a,r as h,F as S,I as R,d as u,c as y,W as j,u as F,a3 as A,a7 as L,a4 as I,p as g,o as B,R as E,y as D,a8 as K,B as v,N as U,a9 as O,C as P,H as W}from"./index-C93MCRui.js";import"./user-new-edit-form-Et2husHg.js";import{T as z,a as x,u as H,g as _,r as G,b as M,c as $,d as V,e as X,f as Y,h as q,i as J,j as Q,C as Z}from"./table-pagination-custom-cXpcQbpv.js";import{C as ee}from"./Snackbar-CsnZb_x7.js";import{b as k,e as ae,f as N,T as b,M as se,d as C,g as te,h as le}from"./form-provider-C9iOJ1LY.js";import{C as oe,F as ne,a as w,c as f}from"./filters-result-Bdl42qqn.js";import{C as re}from"./Card-Ce3bea7q.js";import"./new-password-icon-Bth6BPGM.js";function ie({row:e,selected:l,onSelectRow:n}){return T(),k(),a.jsx(a.Fragment,{children:a.jsxs(z,{hover:!0,selected:l,"aria-checked":l,tabIndex:-1,children:[a.jsx(x,{padding:"checkbox",children:a.jsx(ae,{id:e.id,checked:l,onClick:n})}),a.jsx(x,{sx:{whiteSpace:"nowrap"},children:e.id}),a.jsx(x,{sx:{whiteSpace:"nowrap"},children:e.firstName}),a.jsx(x,{sx:{whiteSpace:"nowrap"},children:e.lastName}),a.jsx(x,{sx:{whiteSpace:"nowrap"},children:e.email}),a.jsx(x,{sx:{whiteSpace:"nowrap"},children:e.userName})]})})}function ce({filters:e,options:l,onResetPage:n}){const r=k(),i=h.useCallback(s=>{n(),e.setState({lastName:s.target.value})},[e,n]),c=h.useCallback(s=>{n(),e.setState({firstName:s.target.value})},[e,n]);return a.jsxs(a.Fragment,{children:[a.jsxs(S,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[a.jsx(N,{sx:{flexShrink:0,width:{xs:1,md:200}},children:a.jsx(b,{fullWidth:!0,label:"Adı",value:e.state.firstName,onChange:c})}),a.jsx(N,{sx:{flexShrink:0,width:{xs:1,md:200}},children:a.jsx(b,{fullWidth:!0,label:"Soyadı",value:e.state.lastName,onChange:i})}),a.jsxs(S,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[a.jsx(b,{fullWidth:!0,value:e.state.name,onChange:c,placeholder:"Ara...",InputProps:{startAdornment:a.jsx(R,{position:"start",children:a.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),a.jsx(y,{onClick:r.onOpen,children:a.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),a.jsx(oe,{open:r.open,anchorEl:r.anchorEl,onClose:r.onClose,slotProps:{arrow:{placement:"right-top"}},children:a.jsxs(se,{children:[a.jsxs(j,{onClick:()=>{r.onClose()},children:[a.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),a.jsxs(j,{onClick:()=>{r.onClose()},children:[a.jsx(u,{icon:"solar:import-bold"}),"Import"]}),a.jsxs(j,{onClick:()=>{r.onClose()},children:[a.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})})]})}function de({filters:e,onResetPage:l,totalResults:n,sx:r}){const i=h.useCallback(()=>{l(),e.setState({firstName:""})},[e,l]),c=h.useCallback(()=>{l(),e.setState({lastName:""})},[e,l]),s=h.useCallback(()=>{l(),e.setState({status:"all"})},[e,l]),o=h.useCallback(()=>{l(),e.onResetState()},[e,l]);return a.jsxs(ne,{totalResults:n,onReset:o,sx:r,children:[a.jsx(w,{label:"Servis Tamamlanma Durumu:",isShow:e.state.status!=="all",children:a.jsx(C,{...f,label:e.state.status,onDelete:s,sx:{textTransform:"capitalize"}})}),a.jsx(w,{label:"Adı:",isShow:!!e.state.firstName,children:a.jsx(C,{...f,label:e.state.firstName,onDelete:i})}),a.jsx(w,{label:"Soyadı:",isShow:!!e.state.lastName,children:a.jsx(C,{...f,label:e.state.lastName,onDelete:c})})]})}const he=[{value:"all",label:"Liste"}],me=[{id:"id",label:"ID"},{id:"firstName",label:"Ad"},{id:"lastName",label:"Soyad"},{id:"email",label:"Email"},{id:"userName",label:"Kullanıcı Adı"}];function xe(){const e=H();F();const l=T();h.useState(!0);const[n,r]=h.useState([]),i=A({firstName:"",lastName:"",status:"all"}),c=sessionStorage.getItem(L);h.useEffect(()=>{(async()=>{try{const d=await O.get(P.usersListUrl,{headers:{Authorization:`Bearer ${c}`}});r(d.data)}catch(d){console.error("error",d)}})()},[c]);const s=ue({inputData:n,comparator:_(e.order,e.orderBy),filters:i.state});G(s,e.page,e.rowsPerPage);const o=!!i.state.firstName||i.state.lastName,m=!s.length&&o||!s.length,p=(t,d)=>{" "};return a.jsxs(a.Fragment,{children:[a.jsxs(I,{children:[a.jsx(ee,{heading:"Kullanıcı Listesi",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Kullanıcı",href:g.dashboard.user.root},{name:"Kullanıcı Listesi"}],action:a.jsx(B,{component:E,href:g.dashboard.user.new,variant:"contained",startIcon:a.jsx(u,{icon:"mingcute:add-line"}),children:"Yeni Kullanıcı"}),sx:{mb:{xs:3,md:5}}}),a.jsxs(re,{sx:{width:"100%",overflowX:"auto"},children:[a.jsx(te,{value:i.state.status,onChange:p,sx:{px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${D(t.vars.palette.grey["500Channel"],.08)}`},children:he.map(t=>a.jsx(le,{iconPosition:"end",value:t.value,label:t.label,icon:a.jsx(K,{variant:(t.value==="all"||t.value===i.state.status)&&"filled"||"soft",children:["active","pending","banned","rejected"].includes(t.value)?n.filter(d=>d.status===t.value).length:n.length})},t.value))}),a.jsx(ce,{filters:i,onResetPage:e.onResetPage}),o&&a.jsx(de,{filters:i,totalResults:s.length,onResetPage:e.onResetPage,sx:{p:2.5,pt:0}}),a.jsxs(v,{sx:{position:"relative"},children:[a.jsx(M,{dense:e.dense,numSelected:e.selected.length,rowCount:s.length,onSelectAllRows:t=>e.onSelectAllRows(t,s.map(d=>d.id))}),a.jsx(v,{sx:{position:"relative",height:"500px",display:"flex",justifyContent:"flex-start",width:"100%",overflowX:"auto"},children:a.jsx(U,{children:a.jsxs($,{size:e.dense?"small":"medium",sx:{minWidth:1500,width:"100%"},children:[a.jsx(V,{order:e.order,orderBy:e.orderBy,headLabel:me,rowCount:s.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,s.map(d=>d.id))}),a.jsxs(X,{children:[s.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(t=>a.jsx(ie,{row:t,selected:e.selected.includes(t.id),onSelectRow:()=>e.onSelectRow(t.id)},t.id)),a.jsx(Y,{height:e.dense?56:76,emptyRows:q(e.page,e.rowsPerPage,s.length)}),a.jsx(J,{notFound:m})]})]})})})]}),a.jsx(Q,{page:e.page,dense:e.dense,count:s.length,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onChangeDense:e.onChangeDense,onRowsPerPageChange:e.onChangeRowsPerPage})]})]}),a.jsx(Z,{open:l.value,onClose:l.onFalse})]})}function ue({inputData:e,comparator:l,filters:n}){const{firstName:r,lastName:i,status:c}=n;if(!Array.isArray(e))return console.error("inputData is not an array:",e),[];const s=e.map((o,m)=>[o,m]);return s.sort((o,m)=>{const p=l(o[0],m[0]);return p!==0?p:o[1]-m[1]}),e=s.map(o=>o[0]),r&&(e=e.filter(o=>o.firstName.toLowerCase().includes(r.toLowerCase()))),i&&(e=e.filter(o=>o.lastName.toLowerCase().includes(i.toLowerCase()))),c!=="all"&&(e=e.filter(o=>o.status===c)),e}const pe={title:`Kullanıcı Listesi | Dashboard - ${P.appName}`};function Ne(){return a.jsxs(a.Fragment,{children:[a.jsx(W,{children:a.jsx("title",{children:pe.title})}),a.jsx(xe,{})]})}export{Ne as default};
