import{D as h,u as A,r as o,b as B,e as F,j as e,ac as E,ad as G,a8 as L,B as j,T as x,ae as z,F as u,o as H,W as n}from"./index-C93MCRui.js";import"./tr-Dnx_KkQs.js";import{z as l,i as V,u as I,t as O,a as W,F as t,j as K,k as R,C as q,L as Y}from"./form-provider-C9iOJ1LY.js";import{s as y,G as c,S as _,M as J}from"./Snackbar-CsnZb_x7.js";import{C as f}from"./Card-Ce3bea7q.js";h.locale("tr");const Q=l.object({firstName:l.string().min(1,{message:"Ad bilgisi gereklidir!"}),lastName:l.string().min(1,{message:"Soyad bilgisi gereklidir!"}),email:l.string().min(1,{message:"Email bilgisi gereklidir!"}).email({message:"Geçerli bir mail adresi girilmelidir!"}),phoneNumber:y.phoneNumber({isValidPhoneNumber:V}),country:y.objectOrNull({message:{required_error:"Ülke bilgisi gereklidir!"}}),sessionStartDate:l.date().refine(a=>a instanceof Date,{message:"Geçerli bir tarih seçilmelidir!"}),paymentMethod:l.string().min(1,{message:"Ödeme yöntemi bilgisi gereklidir!"})});function ae({currentUser:a}){A();const[k,m]=o.useState(!1),[S,d]=o.useState(""),[v,p]=o.useState("success"),N=o.useMemo(()=>({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",country:(a==null?void 0:a.country)||"",sessionStartDate:(a==null?void 0:a.sessionStartDate)||null,paymentMethod:(a==null?void 0:a.paymentMethod)||""}),[a]),g=I({mode:"onSubmit",resolver:O(Q),defaultValues:N});B();const{reset:D,watch:C,control:w,handleSubmit:P,formState:{isSubmitting:T}}=g,r=C(),b=(s,i)=>{i!=="clickaway"&&m(!1)},M=P(async s=>{try{await F({userName:s.email,email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName,country:s.country,sessionStartDate:s.sessionStartDate,paymentMethod:s.paymentMethod}),d("Hasta başarıyla kaydedildi."),p("success"),m(!0),D()}catch(i){console.log("error",i),i.response&&i.response.status===409?d("Bu e-posta adresi veya kullanıcı adı zaten kullanımda."):d("Hasta kaydedilemedi, lütfen tekrar deneyin."),p("error"),m(!0)}});return e.jsxs(E,{dateAdapter:G,adapterLocale:"tr",children:[e.jsx(W,{methods:g,onSubmit:M,children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{xs:12,md:4,children:e.jsxs(f,{sx:{pt:10,pb:5,px:3},children:[a&&e.jsx(L,{color:r.status==="active"&&"success"||r.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:r.status}),e.jsx(j,{sx:{mb:5},children:e.jsx(t.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:e.jsxs(x,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["izin verilen formatlar *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max yüklenecek kapasite ",K(3145728)]})})}),a&&e.jsx(R,{labelPlacement:"start",control:e.jsx(q,{name:"status",control:w,render:({field:s})=>e.jsx(z,{...s,checked:s.value!=="active",onChange:i=>s.onChange(i.target.checked?"banned":"active")})}),label:e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),a&&e.jsx(u,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:e.jsx(H,{variant:"soft",color:"error",children:"Delete user"})})]})}),e.jsx(c,{xs:12,md:8,children:e.jsxs(f,{sx:{p:3},children:[e.jsxs(j,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[e.jsx(t.Text,{name:"firstName",label:"Ad"}),e.jsx(t.Text,{name:"lastName",label:"Soyad"}),e.jsxs(t.Select,{name:"gender",label:"Cinsiyet",defaultValue:"",children:[e.jsx(n,{value:"male",children:"Erkek"}),e.jsx(n,{value:"female",children:"Kadın"})]}),e.jsx(t.DatePicker,{name:"dateofBirth",label:"Doğum Tarihi",defaultValue:h()}),e.jsx(t.Text,{name:"email",label:"E-Posta"}),e.jsx(t.Phone,{name:"phoneNumber",label:"Telefon"}),e.jsx(t.CountrySelect,{fullWidth:!0,name:"country",label:"Ülke",placeholder:"Ülke Seç ..."}),e.jsx(t.Text,{name:"",label:"Adres"}),e.jsxs(t.Select,{fullWidth:!0,name:"psychologist",label:"Piskolog",children:[e.jsx(n,{value:"psychologist1",children:"Piskolog 1"}),e.jsx(n,{value:"psychologist2",children:"Piskolog 2"})]}),e.jsx(t.DatePicker,{name:"sessionStartDate",label:"Seans Başlangıç Tarihi",defaultValue:h()}),e.jsx(t.Text,{name:"paymentMethod",label:"Ödeme Yöntemi"})]}),e.jsx(u,{alignItems:"flex-end",sx:{mt:1},children:e.jsx(Y,{type:"submit",variant:"contained",loading:T,children:a?"Değişiklikleri Kaydet":"Hasta Oluştur"})})]})})]})}),e.jsx(_,{open:k,autoHideDuration:6e3,onClose:b,children:e.jsx(J,{onClose:b,severity:v,sx:{width:"100%"},children:S})})]})}export{ae as P};
