import{u as K,r as m,j as a,X as U,aA as w,B as O,W as P,I as D,z as M,a0 as I,$ as X,C as v,p as B,ac as H}from"./index-CynfWJw_.js";import{t as J,z as r,L as Z}from"./zod-C2F2f5go.js";import{u as q,C as o,F as h,i as $}from"./fields-CkpNXIXJ.js";import{S as Q,s as ee}from"./Snackbar-DRE7eJ0q.js";import{F as ae}from"./form-provider-BboyyOkn.js";import{G as y}from"./Grid2-dUppYYIQ.js";import{C as te}from"./Card-CrNj0u9u.js";import{T as u}from"./KeyboardArrowRight-DAjf8yPQ.js";import{C as se}from"./Chip-BAdTIlY7.js";import{M as ie}from"./Alert-BoZA29CH.js";import{m as le}from"./config-context-client-v7VOFo66-SrREZ7yf.js";const ne=["KLINIK PSIKOLOJI","GELISIM PSIKOLOJISI","AILE VE CIFT TERAPISI","EGITIM PSIKOLOJISI","DIGER"],re=["COCUK VE ERGEN PSIKIYATRISI","YETISKIN PSIKIYATRISI","DIGER"],oe=[{value:"PSIKOLOG",label:"PSIKOLOG"},{value:"PSIKIYATRIST",label:"PSIKIYATRIST"}],ve=[{value:"10",label:"10"},{value:"20",label:"20"},{value:"30",label:"30"},{value:"40",label:"40"},{value:"50",label:"50"},{value:"75",label:"75"}],ye={ZERO_TO_ONE:"0-1 Y",TWO_TO_FIVE:"2-5 Y",SIX_TO_TEN:"6-10 Y",ELEVEN_TO_FIFTEEN:"11-15 Y",SIXTEEN_TO_TWENTY:"16-20 Y",TWENTY_TO_PLUS:"20+ Y"},me=[{value:"ZERO_TO_ONE",label:"0-1 Y"},{value:"TWO_TO_FIVE",label:"2-5 Y"},{value:"SIX_TO_TEN",label:"6-10 Y"},{value:"ELEVEN_TO_FIFTEEN",label:"11-15 Y"},{value:"SIXTEEN_TO_TWENTY",label:"16-20 Y"},{value:"TWENTY_TO_PLUS",label:"20+ Y"}];H.locale("tr");const de=r.object({therapistFirstName:r.string().min(1,{message:"Ad bilgisi gereklidir!"}),therapistLastName:r.string().min(1,{message:"Soyad bilgisi gereklidir!"}),therapistEmail:r.string().min(1,{message:"Email bilgisi gereklidir!"}).email({message:"Geçerli bir mail adresi girilmelidir!"}),therapistPhoneNumber:ee.phoneNumber({isValidPhoneNumber:$}),therapistType:r.string().min(1,{message:"Danışman türü bilgisi gereklidir!"}),therapistSpecializationAreas:r.string().array().nonempty({message:"En az bir adet Uzmanlık alanı seçilmelidir!"}),therapistYearsOfExperience:r.string().min(1,{message:"Deneyim bilgisi gereklidir!"}),therapistEducation:r.string().min(1,{message:"Eğitim bilgisi gereklidir!"}),therapistAddress:r.string().optional(),therapistUniversity:r.string().optional(),therapistCertifications:r.string().optional(),therapistAppointmentFee:r.number().min(1,{message:"Randevu ücret bilgisi gereklidir!"})});function Ne({currentTherapist:t}){const N=K(),[A,b]=m.useState(!1),[j,S]=m.useState(""),[C,f]=m.useState("success"),[_,k]=m.useState(""),[Y,E]=m.useState([]),l=m.useMemo(()=>({therapistFirstName:(t==null?void 0:t.therapistFirstName)||"",therapistLastName:(t==null?void 0:t.therapistLastName)||"",therapistEmail:(t==null?void 0:t.therapistEmail)||"",therapistPhoneNumber:(t==null?void 0:t.therapistPhoneNumber)||"",therapistType:(t==null?void 0:t.therapistType)||"",therapistSpecializationAreas:(t==null?void 0:t.therapistSpecializationAreas)||[],therapistYearsOfExperience:(t==null?void 0:t.therapistYearsOfExperience)||"ZERO_TO_ONE",therapistEducation:String((t==null?void 0:t.therapistEducation)||""),therapistAddress:(t==null?void 0:t.therapistAddress)||"",therapistUniversity:(t==null?void 0:t.therapistUniversity)||"",therapistCertifications:(t==null?void 0:t.therapistCertifications)||"",therapistAppointmentFee:(t==null?void 0:t.therapistAppointmentFee)||""}),[t]),g=q({mode:"onSubmit",resolver:J(de),defaultValues:l}),{reset:L,watch:F,control:n,setValue:x,handleSubmit:R,formState:{isSubmitting:ue}}=g,z=F(),[V,pe]=m.useState(!1),c=(e,s)=>{s!=="clickaway"&&b(!1)},G=async e=>{try{if(console.log("Form submit başladı"),console.log("Form verileri:",e),!e.therapistFirstName||!e.therapistLastName){I.error("Ad ve soyad alanları zorunludur!");return}if(!e.therapistPhoneNumber||e.therapistPhoneNumber.trim()===""){I.error("Telefon numarası zorunludur!");return}if(!e.therapistYearsOfExperience){I.error("Deneyim yılı zorunludur!");return}console.log("API isteği gönderiliyor...");const s=await X.post(v.addTherapistUrl,{...e,therapistPhoneNumber:e.therapistPhoneNumber.trim(),therapistYearsOfExperience:e.therapistYearsOfExperience.toUpperCase()});if(console.log("API yanıtı:",s.data),s.status===200||s.status===201)S("Danışman başarıyla kaydedildi."),f("success"),b(!0),L(),le(v.therapistListUrl,void 0,{revalidate:!0}),setTimeout(()=>{N.push(B.dashboard.therapist.root)},1500);else throw new Error("Sunucudan beklenmeyen bir yanıt alındı. Lütfen tekrar deneyin.")}catch(s){console.error("Therapist form submission error:",s);let i="Danışman kaydedilirken bir hata oluştu. Lütfen tekrar deneyin.";if(s.response){const{status:d,data:p}=s.response;d===400?i=(p==null?void 0:p.message)||"Girilen bilgilerde hata var. Lütfen tüm alanları kontrol edin.":d===409?i="Bu e-posta adresi veya telefon numarası zaten kullanımda.":d===422?i="Girilen bilgiler geçersiz. Lütfen tüm alanları doğru şekilde doldurun.":d>=500?i="Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.":i=(p==null?void 0:p.message)||"Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin."}else s.request&&(i="Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin.");S(i),f("error"),b(!0)}},T=e=>{const s=e.target.value;switch(k(s),s){case"PSIKOLOG":E(ne);break;case"PSIKIYATRIST":E(re);break;default:E([])}},W=m.useCallback(e=>{x("therapistAppointmentFee",Number(e.target.value))},[x]);return a.jsxs(U,{dateAdapter:w,adapterLocale:"tr",children:[a.jsx(ae,{methods:g,onSubmit:R(G),children:a.jsx(y,{container:!0,spacing:4,children:a.jsx(y,{xs:12,md:12,children:a.jsxs(te,{sx:{p:2},children:[a.jsxs(O,{rowGap:2,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 2fr)"},children:[a.jsx(o,{name:"therapistFirstName",control:n,defaultValue:l.therapistFirstName,render:({field:e})=>a.jsx(u,{...e,label:"Ad",variant:"outlined",fullWidth:!0,margin:"normal",inputProps:{tabIndex:1}})}),a.jsx(o,{name:"therapistLastName",control:n,defaultValue:l.therapistLastName,render:({field:e})=>a.jsx(u,{...e,label:"Soyad",variant:"outlined",fullWidth:!0,margin:"normal",inputProps:{tabIndex:2}})}),a.jsx(o,{name:"therapistEmail",control:n,defaultValue:l.therapistEmail,render:({field:e})=>a.jsx(u,{...e,label:"E-Posta",variant:"outlined",fullWidth:!0,inputProps:{tabIndex:3}})}),a.jsx(o,{name:"therapistPhoneNumber",control:n,defaultValue:l.therapistPhoneNumber,render:({field:e})=>a.jsx(h.Phone,{...e,label:"Telefon",ref:e.ref,fullWidth:!0,inputProps:{tabIndex:4}})}),a.jsx(o,{name:"therapistAddress",control:n,defaultValue:l.therapistAddress,render:({field:e})=>a.jsx(u,{...e,label:"Adres",variant:"outlined",fullWidth:!0,inputProps:{tabIndex:5},sx:{gridColumn:"span 2"}})}),a.jsx(o,{name:"therapistEducation",defaultValue:l.therapistEducation,control:n,render:({field:e,fieldState:{error:s}})=>a.jsx(h.EducationSelect,{...e,fullWidth:!0,label:"Eğitim Seviyesi",placeholder:"Eğitim Seç ...",error:!!s,helperText:s?s.message:null,onChange:(i,d)=>{e.onChange(d)},renderInput:i=>a.jsx(u,{...i,label:"Eğitim Seviyesi",variant:"outlined",fullWidth:!0,inputProps:{...i.inputProps,tabIndex:6}})})}),a.jsx(o,{name:"therapistUniversity",control:n,defaultValue:l.therapistUniversity,render:({field:e})=>a.jsx(u,{...e,label:"Mezun olunan Üniversite",fullWidth:!0,variant:"outlined",inputProps:{tabIndex:7}})}),a.jsx(o,{name:"therapistType",control:n,defaultValue:l.therapistType,render:({field:e})=>a.jsx(h.Select,{...e,label:"Danışman Türü",inputProps:{tabIndex:8},onChange:s=>{e.onChange(s),T(s)},value:_,children:oe.map(s=>a.jsx(P,{value:s.value,children:s.label},s.value))})}),a.jsx(o,{name:"therapistSpecializationAreas",label:"Uzmanlık Alanları",control:n,defaultValue:l.therapistSpecializationAreas,render:({field:e})=>a.jsx(h.Autocomplete,{...e,placeholder:"+ Uzmanlık Alanı Ekle",label:"Uzmanlık Alanları",multiple:!0,fullWidth:!0,disableCloseOnSelect:!0,options:Y.map(s=>s),getOptionLabel:s=>s,renderOption:(s,i)=>m.createElement("li",{...s,key:i},i),renderTags:(s,i)=>s.map((d,p)=>m.createElement(se,{...i({index:p}),key:d,label:d,size:"small",color:"primary",variant:"outlined"})),onChange:(s,i)=>e.onChange(i)})}),a.jsx(o,{name:"therapistYearsOfExperience",control:n,defaultValue:l.therapistYearsOfExperience,render:({field:e})=>{var s;return a.jsx(u,{name:"therapistYearsOfExperience",label:"Deneyim Süresi",select:!0,fullWidth:!0,value:z.therapistYearsOfExperience,onChange:e.onChange,error:!!e.error,helperText:(s=e.error)==null?void 0:s.message,children:me.map(i=>a.jsx(P,{value:i.value,children:i.label},i.value))})}}),a.jsx(o,{name:"therapistCertifications",control:n,defaultValue:l.therapistCertifications,render:({field:e})=>a.jsx(u,{...e,label:"Sertifikalar",fullWidth:!0,inputProps:{tabIndex:11}})}),a.jsx(o,{name:"therapistAppointmentFee",control:n,defaultValue:l.therapistAppointmentFee,render:({field:e})=>a.jsx(u,{...e,label:"Randevu Ücreti",placeholder:"0.00",type:"number",onChange:s=>W(s),InputLabelProps:{shrink:!0},InputProps:{startAdornment:a.jsx(D,{position:"start",children:a.jsx(O,{sx:{typography:"subtitle2",color:"text.disabled"},children:"₺"})}),inputProps:{tabIndex:12,step:"0.01"}},fullWidth:!0})})]}),a.jsx(M,{alignItems:"flex-end",sx:{mt:1},children:a.jsx(Z,{type:"submit",variant:"contained",loading:V,children:t?"Değişiklikleri Kaydet":"Yeni Danışman Oluştur"})})]})})})}),a.jsx(Q,{open:A,autoHideDuration:6e3,onClose:c,children:a.jsx(ie,{onClose:c,severity:C,sx:{width:"100%"},children:j})})]})}export{ye as E,ve as T,oe as a,Ne as b};
