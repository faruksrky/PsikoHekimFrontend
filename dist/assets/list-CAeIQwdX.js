import{C as O,aC as J,r as p,J as K,an as P,j as e,W as g,a3 as C,b as Q,u as X,aD as q,p as x,a0 as S,a2 as Z,h as R,R as ee,d as f,at as te,z as ae,H as ie}from"./index-CynfWJw_.js";import{E as re,T as se,a as ne}from"./therapist-new-edit-form-BujCsZMp.js";import{u as le}from"./index-CyqANO-S.js";import{E as k}from"./empty-content-0T_kuyRU.js";import{D as oe}from"./DataGridContainer-BdHldlzz.js";import{C as pe}from"./confirm-dialog-CIzJmROj.js";import{C as he}from"./custom-breadcrumbs-D1SIBx8r.js";import{F as v,I as D,S as N,O as E}from"./Select-Cf1IhRw-.js";import{C as F}from"./Checkbox-B5NrqAli.js";import{s as A,D as de,G as ce,a as me,b as ue,c as xe,d as fe,e as b}from"./change-case-D-aEBbxU.js";import{F as ge,a as I,c as z}from"./filters-result-BGyDO7Ng.js";import{C as y}from"./Chip-BAdTIlY7.js";import{C as Ce}from"./Card-CrNj0u9u.js";import"./zod-C2F2f5go.js";import"./fields-CkpNXIXJ.js";import"./KeyboardArrowRight-DAjf8yPQ.js";import"./index-B5Fc--5R.js";import"./use-popover-BYoJAYR4.js";import"./styles-CjY7tkEK.js";import"./DatePicker-D6Bg7nNj.js";import"./DialogContent-C7q4RNtx.js";import"./isMuiElement-DgtO_rkw.js";import"./Tabs-BVcslzTo.js";import"./Snackbar-DRE7eJ0q.js";import"./form-provider-BboyyOkn.js";import"./Grid2-dUppYYIQ.js";import"./Alert-BoZA29CH.js";import"./config-context-client-v7VOFo66-SrREZ7yf.js";import"./index-DZrydARe.js";import"./DialogTitle-DxWrXely.js";import"./reselect-Cb1M7eWQ.js";import"./FormControlLabel-BHbER4Wr.js";import"./TablePagination-BQYB6LpS.js";import"./TableCell-DQfdyrWM.js";const Te=[{value:"in stock",label:"In stock"},{value:"low stock",label:"Low stock"},{value:"out of stock",label:"Out of stock"}],be={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function Re(){const{data:t,isLoading:s,error:r,isValidating:h}=le(O.therapistListUrl,J,be);return p.useMemo(()=>({therapists:(t==null?void 0:t.therapists)||[],therapistsLoading:s,therapistsError:r,therapistsValidating:h,therapistsEmpty:!s&&!(t!=null&&t.therapists.length)}),[t==null?void 0:t.therapists,r,s,h])}function ye({filters:t,options:s}){K();const r=P({therapistType:t.state.therapistType||[],therapistRating:t.state.therapistRating||[]}),h=p.useCallback(i=>{const{target:{value:c}}=i;r.setState({therapistType:typeof c=="string"?c.split(","):c})},[r]),n=p.useCallback(i=>{const{target:{value:c}}=i;r.setState({therapistRating:typeof c=="string"?c.split(","):c})},[r]),l=p.useCallback(()=>{t.setState({therapistType:r.state.therapistType})},[t,r.state.therapistType]),o=p.useCallback(()=>{t.setState({therapistRating:r.state.therapistRating})},[t,r.state.therapistRating]);return e.jsxs(e.Fragment,{children:[e.jsxs(v,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(D,{htmlFor:"therapist-filter-therapistType-select-label",children:"Danışman Türü"}),e.jsxs(N,{multiple:!0,value:r.state.therapistType,onChange:h,onClose:l,input:e.jsx(E,{label:"Danışman Türü"}),renderValue:i=>i.map(c=>c).join(", "),inputProps:{id:"therapist-filter-therapistType-select-label"},sx:{textTransform:"capitalize"},children:[s.therapistType.map(i=>e.jsxs(g,{value:i.value,children:[e.jsx(F,{disableRipple:!0,size:"small",checked:r.state.therapistType.includes(i.value)}),i.label]},i.value)),e.jsx(g,{onClick:l,sx:{justifyContent:"center",fontWeight:i=>i.typography.button,border:i=>`solid 1px ${C(i.vars.palette.grey["500Channel"],.16)}`,bgcolor:i=>C(i.vars.palette.grey["500Channel"],.08)},children:"Başvur"})]})]}),e.jsxs(v,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(D,{htmlFor:"therapist-filter-therapistRating-select-label",children:"Danışman Puanı"}),e.jsxs(N,{multiple:!0,value:r.state.therapistRating,onChange:n,onClose:o,input:e.jsx(E,{label:"Danışman Puanı"}),renderValue:i=>i.map(c=>c).join(", "),inputProps:{id:"therapist-filter-therapistRating-select-label"},sx:{textTransform:"capitalize"},children:[s.therapistRating.map(i=>e.jsxs(g,{value:i.value,children:[e.jsx(F,{disableRipple:!0,size:"small",checked:r.state.therapistRating.includes(i.value)}),i.label]},i.value)),e.jsx(g,{disableGutters:!0,disableTouchRipple:!0,onClick:o,sx:{justifyContent:"center",fontWeight:i=>i.typography.button,border:i=>`solid 1px ${C(i.vars.palette.grey["500Channel"],.16)}`,bgcolor:i=>C(i.vars.palette.grey["500Channel"],.08)},children:"Başvur"})]})]})]})}function je({filters:t,totalResults:s,sx:r}){const h=p.useCallback(l=>{const o=t.state.therapistType.filter(i=>i!==l);t.setState({therapistType:o})},[t]),n=p.useCallback(l=>{const o=t.state.therapistRating.filter(i=>i!==l);t.setState({therapistRating:o})},[t]);return e.jsxs(ge,{totalResults:s,onReset:t.onResetState,sx:r,children:[e.jsx(I,{label:"Danışman Türü:",isShow:!!t.state.therapistType.length,children:t.state.therapistType.map(l=>p.createElement(y,{...z,key:l,label:A(l),onDelete:()=>h(l)}))}),e.jsx(I,{label:"Danışman Puanı:",isShow:!!t.state.therapistRating.length,children:t.state.therapistRating.map(l=>p.createElement(y,{...z,key:l,label:A(l),onDelete:()=>n(l)}))})]})}function we({params:t}){return`${t.row.therapistFirstName} ${t.row.therapistLastName}`}function Se({params:t}){return t.row.therapistPhoneNumber}function ke({params:t}){return t.row.therapistEmail}function ve({params:t}){return t.row.therapistAddress}function De({params:t}){return t.row.therapistEducation}function Ne({params:t}){return t.row.therapistUniversity}function Ee({params:t}){return t.row.therapistType}function Fe({params:t}){const{therapistSpecializationAreas:s}=t.row;return!Array.isArray(s)||s.length===0?e.jsx("span",{children:"Belirtilmedi"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:s.map((r,h)=>e.jsx(y,{label:r,size:"small",variant:"outlined",color:"primary"},h))})}function Ae({params:t}){const s=t.row.therapistYearsOfExperience;return s?re[s]||s:"-"}function Ie({params:t}){return t.row.therapistCertifications}function ze({params:t}){const s=t.row.therapistAppointmentFee;return s?`${s.toLocaleString("tr-TR")} ₺`:"-"}function Oe({params:t}){return t.row.id}function Pe({params:t}){return t.row.therapistRating}function Le({params:t}){return t.row.therapistAvailability}function Ge(){const t=Q(),s=X(),{therapists:r,therapistsLoading:h}=Re(),n=P({therapistType:[],therapistRating:[]}),[l,o]=p.useState([]),[i,c]=p.useState([]),[L,j]=p.useState(null),[G]=q();G.get("patientId");const W=p.useCallback(a=>{s.push(x.dashboard.therapist.details(a))},[s]),B=p.useCallback(a=>{s.push(x.dashboard.therapist.edit(a))},[s]),M=p.useCallback(a=>{const u=l.filter(w=>w.id!==a);o(u),S.success("Danışman başarıyla silindi!")},[l]),$=[{field:"therapistId",headerName:"ID",width:40,renderCell:a=>e.jsx(Oe,{params:a})},{field:"therapistFirstName",headerName:"Ad Soyad",flex:1,minWidth:140,renderCell:a=>e.jsx(we,{params:a})},{field:"therapistPhoneNumber",headerName:"Telefon",flex:1.5,minWidth:130,renderCell:a=>e.jsx(Se,{params:a})},{field:"therapistEmail",headerName:"Email",flex:1.2,minWidth:170,renderCell:a=>e.jsx(ke,{params:a})},{field:"therapistAddress",headerName:"Adres",flex:2,minWidth:300,renderCell:a=>e.jsx(ve,{params:a})},{field:"therapistEducation",headerName:"Eğitim",flex:1,minWidth:120,renderCell:a=>e.jsx(De,{params:a})},{field:"therapistUniversity",headerName:"Üniversite",flex:1.2,minWidth:150,renderCell:a=>e.jsx(Ne,{params:a})},{field:"therapistType",headerName:"Danışman Türü",flex:1,minWidth:150,renderCell:a=>e.jsx(Ee,{params:a})},{field:"therapistSpecializationAreas",headerName:"Uzmanlık Alanı",flex:2,minWidth:200,renderCell:a=>e.jsx(Fe,{params:a})},{field:"therapistYearsOfExperience",headerName:"Deneyim",flex:1,minWidth:120,renderCell:a=>e.jsx(Ae,{params:a})},{field:"therapistCertifications",headerName:"Sertifikalar",flex:1.5,minWidth:150,renderCell:a=>e.jsx(Ie,{params:a})},{field:"therapistAppointmentFee",headerName:"Randevu Ücreti",flex:1,minWidth:100,renderCell:a=>e.jsx(ze,{params:a})},{field:"therapistRating",headerName:"Danışman Puanı",width:110,type:"singleSelect",editable:!0,renderCell:a=>e.jsx(Pe,{params:a})},{field:"therapistAvailability",headerName:"Takvim",width:160,type:"singleSelect",valueOptions:Te,renderCell:a=>e.jsx(Le,{params:a})},{field:"actions",type:"actions",headerName:"İşlemler",width:120,align:"right",headerAlign:"right",cellClassName:"actions",sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:a=>[e.jsx(b,{showInMenu:!0,icon:e.jsx(f,{icon:"solar:eye-bold"}),label:"Detayları Görüntüle",onClick:()=>W(a.id)}),e.jsx(b,{showInMenu:!0,icon:e.jsx(f,{icon:"solar:pen-bold"}),label:"Düzenle",onClick:()=>B(a.id)}),e.jsx(b,{showInMenu:!0,icon:e.jsx(f,{icon:"solar:trash-bin-trash-bold"}),label:"Sil",onClick:()=>M(a.id),sx:{color:"error.main"}})]}];p.useEffect(()=>{if(!r.length)return;if(!n.state.therapistType.length&&!n.state.therapistRating.length){const d=r.map(m=>({...m,id:m.therapistId,therapistRating:m.therapistRating||30,fullName:`${m.therapistFirstName||""} ${m.therapistSurname||""}`.trim()}));o(d);return}const a=n.state.therapistType.map(d=>d.trim().toLowerCase()),u=n.state.therapistRating.map(d=>d.trim().toLowerCase()),H=r.filter(d=>{const m=!n.state.therapistType.length||d.therapistType&&a.includes(d.therapistType.trim().toLowerCase()),U=!n.state.therapistRating.length||d.therapistRating&&u.includes(d.therapistRating.toString().toLowerCase());return m&&U}).map(d=>({...d,id:d.therapistId,fullName:`${d.therapistFirstName||""} ${d.therapistSurname||""}`.trim()}));o(H)},[r,n.state.therapistType,n.state.therapistRating]);const V=n.state.therapistType.length>0||n.state.therapistRating.length>0,T=Be({inputData:l,filters:n.state}),Y=p.useCallback(()=>{const a=l.filter(u=>!i.includes(u.id));S.success(`${i.length} danışman başarıyla silindi!`),o(a)},[i,l]),_=p.useCallback(()=>e.jsx(We,{filters:n,canReset:V,setFilterButtonEl:j,filteredResults:T.length,onOpenConfirmDeleteRows:t.onTrue}),[n.state,i]);return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{maxWidth:"xl",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(he,{heading:"Danışman Listesi",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Danışman",href:x.dashboard.therapist.root},{name:"Danışman Listesi"}],action:e.jsx(R,{component:ee,href:x.dashboard.therapist.new,variant:"contained",startIcon:e.jsx(f,{icon:"mingcute:add-line"}),children:"Yeni Danışman"}),sx:{mb:{xs:3,md:5}}}),e.jsx(Ce,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e.jsx(oe,{height:600,className:"datagrid-container",children:e.jsx(de,{localeText:te.components.MuiDataGrid.defaultProps.localeText,rows:T.length?T:[],columns:$,loading:h,pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:a=>c(a),slots:{toolbar:_,noRowsOverlay:()=>e.jsx(k,{title:"Henüz hiç danışman kaydı bulunmamaktadır",description:"Yeni danışman eklemek için 'Yeni Danışman' butonunu kullanabilirsiniz."}),noResultsOverlay:()=>e.jsx(k,{title:"Arama kriterlerinize uygun danışman bulunamadı",description:"Farklı arama terimleri deneyebilir veya filtreleri temizleyebilirsiniz."})},slotProps:{panel:{anchorEl:L},toolbar:{setFilterButtonEl:j}},style:{height:"100%",minHeight:"400px",width:"100%"},sx:{height:"100% !important",minHeight:"400px !important",width:"100% !important"}})})})]}),e.jsx(pe,{open:t.value,onClose:t.onFalse,title:"Silme Onayı",content:e.jsxs(e.Fragment,{children:[e.jsxs("strong",{children:[" ",i.length," "]})," danışmanı silmek istediğinizden emin misiniz?"]}),action:e.jsx(R,{variant:"contained",color:"error",onClick:()=>{Y(),t.onFalse()},children:"Sil"})})]})}function We({filters:t,canReset:s,selectedRowIds:r=[],filteredResults:h,setFilterButtonEl:n,onOpenConfirmDeleteRows:l}){return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{children:[e.jsx(ye,{filters:t,options:{therapistType:ne,therapistRating:se}}),e.jsx(me,{}),e.jsxs(ae,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!r.length&&e.jsxs(R,{size:"small",color:"error",startIcon:e.jsx(f,{icon:"solar:trash-bin-trash-bold"}),onClick:l,children:["Sil (",r.length,")"]}),e.jsx(ue,{}),e.jsx(xe,{ref:n}),e.jsx(fe,{})]})]}),s&&e.jsx(je,{filters:t,totalResults:h,sx:{p:2.5,pt:0}})]})}function Be({inputData:t,filters:s}){const{therapistType:r,therapistRating:h}=s;let n=t;if(Array.isArray(r)&&r.length>0){const l=r.map(o=>o.trim().toLowerCase());n=n.filter(o=>o.therapistType&&l.includes(o.therapistType.trim().toLowerCase()))}if(Array.isArray(h)&&h.length>0){const l=h.map(o=>o.trim().toLowerCase());n=n.filter(o=>o.therapistRating&&l.includes(o.therapistRating.toString().toLowerCase()))}return n}const Me={title:`Danışman Listesi | Dashboard - ${O.appName}`};function yt(){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{children:e.jsx("title",{children:Me.title})}),e.jsx(Ge,{})]})}export{yt as default};
