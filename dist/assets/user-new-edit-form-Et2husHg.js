import{u as S,r as m,b as w,e as v,j as a,B as T,I as C,c as F,d as I,F as A}from"./index-C93MCRui.js";import{z as i,i as B,u as K,t as E,a as G,F as l,L as z}from"./form-provider-C9iOJ1LY.js";import{s as M,G as u,S as P,M as L}from"./Snackbar-CsnZb_x7.js";import{C as D}from"./Card-Ce3bea7q.js";const H=i.object({userName:i.string().min(1,{message:"Kullanıcı adı bilgisi gereklidir!"}),firstName:i.string().min(1,{message:"Ad bilgisi gereklidir!"}),lastName:i.string().min(1,{message:"Soyad bilgisi gereklidir!"}),email:i.string().min(1,{message:"Email bilgisi gereklidir!"}).email({message:"Geçerli bir mail adresi girilmelidir!"}),phoneNumber:M.phoneNumber({isValidPhoneNumber:B}),password:i.string().min(6,{message:"Şifre en az 6 karakter uzunluğunda olmalıdır!"})});function Q({currentUser:e}){S();const[b,n]=m.useState(!1),[h,t]=m.useState(""),[c,r]=m.useState("success"),f=m.useMemo(()=>({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||"",password:(e==null?void 0:e.password)||"",userName:(e==null?void 0:e.userName)||""}),[e]),p=K({mode:"onSubmit",resolver:E(H),defaultValues:f}),d=w(),{reset:N,watch:j,control:O,handleSubmit:x,formState:{isSubmitting:k}}=p;j();const g=(s,o)=>{o!=="clickaway"&&n(!1)},y=x(async s=>{try{await v({userName:s.email,email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName}),t("Kullanıcı başarıyla kaydedildi."),r("success"),n(!0),N()}catch(o){console.log("error",o),o.response&&o.response.status===409?t("Bu e-posta adresi veya kullanıcı adı zaten kullanımda."):t("Kullanıcı kaydedilemedi, lütfen tekrar deneyin."),r("error"),n(!0)}});return a.jsxs(a.Fragment,{children:[a.jsx(G,{methods:p,onSubmit:x(y),children:a.jsx(u,{container:!0,spacing:3,children:a.jsx(u,{xs:12,md:5,children:a.jsxs(D,{sx:{p:3},children:[a.jsxs(T,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[a.jsx(l.Text,{name:"userName",label:"Kullanıcı Adı"}),a.jsx(l.Text,{name:"firstName",label:"Ad"}),a.jsx(l.Text,{name:"lastName",label:"Soyad"}),a.jsx(l.Text,{name:"email",label:"Email"}),a.jsx(l.Phone,{name:"phoneNumber",label:"Telefon"}),a.jsx(l.Text,{name:"password",label:"Şifre",placeholder:"6+ karakter",type:d.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:a.jsx(C,{position:"end",children:a.jsx(F,{onClick:d.onToggle,edge:"end",children:a.jsx(I,{icon:d.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),a.jsx(A,{alignItems:"flex-end",sx:{mt:1},children:a.jsx(z,{type:"submit",variant:"contained",loading:k,children:e?"Değişiklikleri Kaydet":"Kullanıcı Oluştur"})})]})})})}),a.jsx(P,{open:b,autoHideDuration:6e3,onClose:g,children:a.jsx(L,{onClose:g,severity:c,sx:{width:"100%"},children:h})})]})}export{Q as U};
