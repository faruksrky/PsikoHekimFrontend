import{u as T,r as d,b as z,e as C,j as a,B as F,I as G,c as I,d as K,z as L}from"./index-CynfWJw_.js";import{t as A,z as n,L as B}from"./zod-C2F2f5go.js";import{u as E,F as t,i as M}from"./fields-CkpNXIXJ.js";import{S as P,s as H}from"./Snackbar-DRE7eJ0q.js";import{F as O}from"./form-provider-BboyyOkn.js";import{G as h}from"./Grid2-dUppYYIQ.js";import{C as R}from"./Card-CrNj0u9u.js";import{M as V}from"./Alert-BoZA29CH.js";const q=n.object({userName:n.string().min(1,{message:"Kullanıcı adı bilgisi gereklidir!"}),firstName:n.string().min(1,{message:"Ad bilgisi gereklidir!"}),lastName:n.string().min(1,{message:"Soyad bilgisi gereklidir!"}),email:n.string().min(1,{message:"Email bilgisi gereklidir!"}).email({message:"Geçerli bir mail adresi girilmelidir!"}),phoneNumber:H.phoneNumber({isValidPhoneNumber:M}),password:n.string().min(6,{message:"Şifre en az 6 karakter uzunluğunda olmalıdır!"})});function U({currentUser:e}){T();const[c,r]=d.useState(!1),[k,p]=d.useState(""),[N,g]=d.useState("success"),y=d.useMemo(()=>({firstName:(e==null?void 0:e.firstName)||"",lastName:(e==null?void 0:e.lastName)||"",email:(e==null?void 0:e.email)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||"",password:(e==null?void 0:e.password)||"",userName:(e==null?void 0:e.userName)||""}),[e]),f=E({mode:"onSubmit",resolver:A(q),defaultValues:y}),u=z(),{reset:j,watch:S,control:J,handleSubmit:x,formState:{isSubmitting:w}}=f;S();const b=(i,l)=>{l!=="clickaway"&&r(!1)},v=x(async i=>{try{await C({userName:i.email,email:i.email,password:i.password,firstName:i.firstName,lastName:i.lastName}),p("Kullanıcı başarıyla kaydedildi."),g("success"),r(!0),j()}catch(l){console.error("User registration error:",l);let s="Kullanıcı kaydedilemedi, lütfen tekrar deneyin.";if(l.response){const{status:m,data:o}=l.response;m===400?s=(o==null?void 0:o.message)||"Girilen bilgilerde hata var. Lütfen tüm alanları kontrol edin.":m===409?s="Bu e-posta adresi veya kullanıcı adı zaten kullanımda.":m===422?s="Girilen bilgiler geçersiz. Lütfen tüm alanları doğru şekilde doldurun.":m>=500?s="Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.":s=(o==null?void 0:o.message)||"Kullanıcı kaydedilirken bir hata oluştu. Lütfen tekrar deneyin."}else l.request&&(s="Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin.");p(s),g("error"),r(!0)}});return a.jsxs(a.Fragment,{children:[a.jsx(O,{methods:f,onSubmit:x(v),children:a.jsx(h,{container:!0,spacing:3,children:a.jsx(h,{xs:12,md:5,children:a.jsxs(R,{sx:{p:3},children:[a.jsxs(F,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},children:[a.jsx(t.Text,{name:"userName",label:"Kullanıcı Adı"}),a.jsx(t.Text,{name:"firstName",label:"Ad"}),a.jsx(t.Text,{name:"lastName",label:"Soyad"}),a.jsx(t.Text,{name:"email",label:"Email"}),a.jsx(t.Phone,{name:"phoneNumber",label:"Telefon"}),a.jsx(t.Text,{name:"password",label:"Şifre",placeholder:"6+ karakter",type:u.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:a.jsx(G,{position:"end",children:a.jsx(I,{onClick:u.onToggle,edge:"end",children:a.jsx(K,{icon:u.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),a.jsx(L,{alignItems:"flex-end",sx:{mt:1},children:a.jsx(B,{type:"submit",variant:"contained",loading:w,children:e?"Değişiklikleri Kaydet":"Kullanıcı Oluştur"})})]})})})}),a.jsx(P,{open:c,autoHideDuration:6e3,onClose:b,children:a.jsx(V,{onClose:b,severity:N,sx:{width:"100%"},children:k})})]})}export{U};
