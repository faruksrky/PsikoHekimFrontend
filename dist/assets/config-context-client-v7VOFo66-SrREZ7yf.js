import{r as j,a8 as nt}from"./index-CynfWJw_.js";const st=0,ot=1,it=2,Dt=3;var z=Object.prototype.hasOwnProperty;function F(t,e){var n,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&F(t[i],e[i]););return i===-1}if(!n||typeof t=="object"){i=0;for(n in t)if(z.call(t,n)&&++i&&!z.call(e,n)||!(n in e)||!F(t[n],e[n]))return!1;return Object.keys(e).length===i}}return t!==t&&e!==e}const y=new WeakMap,T=()=>{},u=T(),V=Object,E=t=>t===u,v=t=>typeof t=="function",C=(t,e)=>({...t,...e}),rt=t=>v(t.then),I={},g={},H="undefined",A=typeof window!=H,x=typeof document!=H,ct=A&&"Deno"in window,at=()=>A&&typeof window.requestAnimationFrame!=H,ut=(t,e)=>{const n=y.get(t);return[()=>!E(e)&&t.get(e)||I,i=>{if(!E(e)){const r=t.get(e);e in g||(g[e]=r),n[5](e,C(r,i),r||I)}},n[6],()=>!E(e)&&e in g?g[e]:!E(e)&&t.get(e)||I]};let M=!0;const lt=()=>M,[P,U]=A&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[T,T],ft=()=>{const t=x&&document.visibilityState;return E(t)||t!=="hidden"},dt=t=>(x&&document.addEventListener("visibilitychange",t),P("focus",t),()=>{x&&document.removeEventListener("visibilitychange",t),U("focus",t)}),Et=t=>{const e=()=>{M=!0,t()},n=()=>{M=!1};return P("online",e),P("offline",n),()=>{U("online",e),U("offline",n)}},pt={isOnline:lt,isVisible:ft},mt={initFocus:dt,initReconnect:Et},At=!nt.useId,q=!A||ct,St=t=>at()?window.requestAnimationFrame(t):setTimeout(t,1),It=q?j.useEffect:j.useLayoutEffect,L=typeof navigator<"u"&&navigator.connection,Q=!q&&L&&(["slow-2g","2g"].includes(L.effectiveType)||L.saveData),D=new WeakMap,N=(t,e)=>V.prototype.toString.call(t)===`[object ${e}]`;let ht=0;const W=t=>{const e=typeof t,n=N(t,"Date"),i=N(t,"RegExp"),r=N(t,"Object");let s,o;if(V(t)===t&&!n&&!i){if(s=D.get(t),s)return s;if(s=++ht+"~",D.set(t,s),Array.isArray(t)){for(s="@",o=0;o<t.length;o++)s+=W(t[o])+",";D.set(t,s)}if(r){s="#";const p=V.keys(t).sort();for(;!E(o=p.pop());)E(t[o])||(s+=o+":"+W(t[o])+",");D.set(t,s)}}else s=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},Ot=t=>{if(v(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?W(t):"",[t,e]};let wt=0;const X=()=>++wt;async function Rt(...t){const[e,n,i,r]=t,s=C({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let o=s.populateCache;const p=s.rollbackOnError;let w=s.optimisticData;const _=a=>typeof p=="function"?p(a):p!==!1,d=s.throwOnError;if(v(n)){const a=n,c=[],R=e.keys();for(const m of R)!/^\$(inf|sub)\$/.test(m)&&a(e.get(m)._k)&&c.push(m);return Promise.all(c.map(l))}return l(n);async function l(a){const[c]=Ot(a);if(!c)return;const[R,m]=ut(e,c),[k,S,tt,et]=y.get(e),J=()=>{const O=k[c];return(v(s.revalidate)?s.revalidate(R().data,a):s.revalidate!==!1)&&(delete tt[c],delete et[c],O&&O[0])?O[0](it).then(()=>R().data):R().data};if(t.length<3)return J();let f=i,h;const K=X();S[c]=[K,0];const $=!E(w),B=R(),G=B.data,Y=B._c,b=E(Y)?G:Y;if($&&(w=v(w)?w(b,G):w,m({data:w,_c:b})),v(f))try{f=f(b)}catch(O){h=O}if(f&&rt(f))if(f=await f.catch(O=>{h=O}),K!==S[c][0]){if(h)throw h;return f}else h&&$&&_(h)&&(o=!0,m({data:b,_c:u}));if(o&&!h)if(v(o)){const O=o(f,b);m({data:O,error:u,_c:u})}else m({data:f,error:u,_c:u});if(S[c][1]=X(),Promise.resolve(J()).then(()=>{m({_c:u})}),h){if(d)throw h;return}return f}}const Z=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Tt=(t,e)=>{if(!y.has(t)){const n=C(mt,e),i=Object.create(null),r=Rt.bind(u,t);let s=T;const o=Object.create(null),p=(d,l)=>{const a=o[d]||[];return o[d]=a,a.push(l),()=>a.splice(a.indexOf(l),1)},w=(d,l,a)=>{t.set(d,l);const c=o[d];if(c)for(const R of c)R(l,a)},_=()=>{if(!y.has(t)&&(y.set(t,[i,Object.create(null),Object.create(null),Object.create(null),r,w,p]),!q)){const d=n.initFocus(setTimeout.bind(u,Z.bind(u,i,st))),l=n.initReconnect(setTimeout.bind(u,Z.bind(u,i,ot)));s=()=>{d&&d(),l&&l(),y.delete(t)}}};return _(),[t,r,_,s]}return[t,y.get(t)[4]]},yt=(t,e,n,i,r)=>{const s=n.errorRetryCount,o=r.retryCount,p=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!E(s)&&o>s||setTimeout(i,p,r)},vt=F,[Ct,bt]=Tt(new Map),Lt=C({onLoadingSlow:T,onSuccess:T,onError:T,onErrorRetry:yt,onDiscarded:T,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Q?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Q?5e3:3e3,compare:vt,isPaused:()=>!1,cache:Ct,mutate:bt,fallback:{}},pt),Nt=(t,e)=>{const n=C(t,e);if(e){const{use:i,fallback:r}=t,{use:s,fallback:o}=e;i&&s&&(n.use=i.concat(s)),r&&o&&(n.fallback=C(r,o))}return n},jt=j.createContext({});export{Dt as E,st as F,q as I,it as M,ot as R,jt as S,u as U,Nt as a,C as b,A as c,Lt as d,y as e,Ct as f,E as g,ut as h,v as i,rt as j,X as k,Rt as l,bt as m,At as n,St as r,Ot as s,It as u};
